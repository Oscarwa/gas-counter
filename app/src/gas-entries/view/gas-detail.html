<div layout="column" ng-if="user">

  <!-- Form -->
    <md-card md-theme="default" flex=100>
      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">{{ 'GAS.TITLE' | translate}}</span>
          <div layout="row">
            <div flex>
              {{ 'GAS.CURRENT_GAS_PRICE' | translate}}:
              <md-button class="md-primary" ng-class="gasPrice == '0' ? 'md-warn' : ''"
                ng-click="showChangePricePrompt($event)">{{gasPrice | number:3}}</md-button>
            </div>
            <div flex>
              <md-select ng-model="entry.car" ng-show="cars.length" ng-change="reloadGasEntries()">
                <md-option ng-repeat="car in cars" value="{{car.$id}}" ng-selected="car.default">
                  {{car.year}} {{car.brand}} {{car.model}}
                </md-option>
              </md-select>
              <md-button ng-hide="cars.length" class="md-primary" ng-href="#/car">{{ 'GAS.ADD_CAR' | translate}}</md-button>
            </div>
          </div>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <div layout="row" layout-align="center">
          <md-input-container class="md-block" flex=30>
            <label>{{ 'GAS.COST' | translate}}</label>
            <input ng-model="entry.cost" type="number" placeholder="$ 0.00" ng-blur="calculateLts()">
          </md-input-container>
          <md-input-container class="md-block" flex=30>
            <label>{{ 'GAS.VOLUME' | translate}}</label>
            <input ng-model="entry.l" type="number" placeholder="40.00" ng-blur="calculateCost()">
          </md-input-container>
          <md-input-container class="md-block" flex=40>
            <label>{{ 'GAS.MILEAGE' | translate}}</label>
            <input ng-model="entry.kms" type="number" placeholder="100000">
          </md-input-container>
        </div>
        <div layout="row"  layout-align="end center">
          <md-card-actions>
            <md-button ng-click="addEntry()" class="md-raised md-primary">{{ 'GAS.SAVE' | translate}}</md-button>
            <md-button ng-click="clearEntry()" class="md-raised">{{ 'GAS.CLEAR' | translate}}</md-button>
          </md-card-actions>
        </div>
      </md-card-content>
    </md-card>

  <!-- List -->
      <md-content flex=100 layout-margin>
        <md-list>
          <md-list-item class="md-3-line" ng-repeat="gasEntry in gasEntries | orderBy:'-'" ng-click="null">
            <img src="assets/svg/gas.png" class="md-avatar" alt="" />
            <div class="md-list-item-text" layout="column">
              <h4 flex>{{gasEntry.date | date:'fullDate' }}</h4>
              <h3 flex>{{gasEntry.cost | currency:"$":2 }}</h3>
              <div flex>
                <h3>{{gasEntry.l | number:2 }} {{ 'GAS.VOLUME_UNIT' | translate}}</h3>
                <p ng-show="gasEntry.kmDiffNext">{{ 'GAS.PERFORMANCE' | translate}}: {{gasEntry.kmDiffNext / gasEntry.l | number:3}} {{ 'GAS.DISTANCE_UNIT' | translate}}/{{ 'GAS.VOLUME_UNIT' | translate}} ({{gasEntry.kmDiffNext | number:0}}/{{gasEntry.l | number:1}})</p>
              </div>
              <p>{{gasEntry.kms | number:0 }} {{ 'GAS.MILEAGE' | translate}} <span ng-show="gasEntry.kmDiffPrevious">[{{gasEntry.kmDiff | number}} {{ 'GAS.DISTANCE_UNIT' | translate}}s {{ 'GAS.DISTANCE_DIFF' | translate}}]</span></p>
            </div>
            <md-divider ></md-divider>
          </md-list-item>
        </md-list>
      </md-content>
</div>
