<div layout="column" ng-if="user">

  <!-- Form -->
    <md-card md-theme="default" flex=100>
      <md-card-title>
        <md-card-title-text>
          <span class="md-headline">New gas entry</span>
          <div layout="row">
            <div flex>
              Current gas price:
              <md-button class="md-primary" ng-click="showChangePricePrompt($event)">{{gasPrice | number:3}}</md-button>
            </div>
            <div flex>
              <md-select ng-model="entry.car" ng-show="cars">
                <md-option ng-repeat="car in cars" value="{{car}}" ng-selected="car.default">
                  {{car.year}} {{car.brand}} {{car.model}}
                </md-option>
              </md-select>
              <md-button ng-hide="cars" class="md-primary" ng-click="addCar()">Add your first car</md-button>
            </div>
          </div>
        </md-card-title-text>
      </md-card-title>
      <md-card-content>
        <div layout="row" layout-align="center">
          <md-input-container class="md-block" flex=30>
            <label>Cost</label>
            <input ng-model="entry.price" type="number" placeholder="$ 0.00" ng-blur="calculateLts()">
          </md-input-container>
          <md-input-container class="md-block" flex=30>
            <label>Lts</label>
            <input ng-model="entry.l" type="number" placeholder="40.00" ng-blur="calculateCost()">
          </md-input-container>
          <md-input-container class="md-block" flex=40>
            <label>KMs</label>
            <input ng-model="entry.kms" type="number" placeholder="100000">
          </md-input-container>
        </div>
        <div layout="row"  layout-align="end center">
          <md-card-actions>
            <md-button ng-click="addEntry()" class="md-raised md-primary">Add</md-button>
            <md-button ng-click="clearEntry()" class="md-raised">Clear</md-button>
          </md-card-actions>
        </div>
      </md-card-content>
    </md-card>

  <!-- List -->
      <md-content flex=100 layout-margin>
        <md-list>
          <md-list-item class="md-3-line" ng-repeat="gasEntry in gasEntries | orderBy:'-'" ng-click="null">
            <img src="assets/svg/gas.png" class="md-avatar" alt="" />
            <div class="md-list-item-text" layout="column">
              <h4 flex>{{gasEntry.date | date:'fullDate' }}</h4>
              <h3 flex>{{gasEntry.price | currency:"$":2 }}</h3>
              <div flex>
                <h3>{{gasEntry.l | number:2 }} l</h3>
                <p ng-show="gasEntry.kmDiffNext">Performance: {{gasEntry.kmDiffNext / gasEntry.l | number:3}} km/l ({{gasEntry.kmDiffNext | number:0}}/{{gasEntry.l | number:1}})</p>
              </div>
              <p>{{gasEntry.kms | number:0 }} kms <span ng-show="gasEntry.kmDiffPrevious">[{{gasEntry.kmDiff | number}} kms since last entry]</span></p>
            </div>
            <md-divider ></md-divider>
          </md-list-item>
        </md-list>
      </md-content>
</div>
